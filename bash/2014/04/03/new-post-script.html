<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>new post script</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Stuff Andrew Likes</a></h1>
            <a class="extra" href="/">home</a>
            <a class="extra" href="/categories.html">categories</a>
            <a class="extra" href="/tags.html">tags</a>
            <a class="extra" href="/archive.html">archive</a>
          </div>

          <h1>new post script</h1>
<p class="meta">03 Apr 2014</p>

<div class="post">
<p>I’ve started playing with <a href="http://jekyllrb.com/">Jekyll</a>.</p>
<p>Jekyll has some assumptions about the way files are named. In particular, jekyll assumes that posts follow this format:</p>
<pre><code>YYYY-MM-DD-title-separated-with-dashes.markdown</code></pre>
<p>This seems like a pain to type out to me, and I’m all about saving keystrokes, so my first course of action was to write a script to take some of the tedium out of new posts.</p>
<h1 id="enter-new-post.sh">Enter <code>new-post.sh</code></h1>
<p><code>new-post.sh</code> takes the title of a post as an argument, fills in a base template, saves it with the filename jekyll wants, then opens it in vim.</p>
<pre><code>$ ./new-posts.sh
usage: ./new-post.sh &lt;title&gt;
$ ./new-posts.sh new post script
$ cat _posts/2014-04-03-new-post-script.markdown
---
layout: post
title:  &quot;new post script&quot;
date:   2014-04-03 21:29:37
categories: TODO
---

# TODO #
</code></pre>
<h1 id="writing-the-script">Writing the script</h1>
<p>First, use the <code>date</code> unix utility to format the current date.</p>
<div class="highlight"><pre><code class="sh"><span class="nv">DATE</span><span class="o">=</span><span class="k">$(</span>date +<span class="s2">&quot;%Y-%m-%d&quot;</span><span class="k">)</span>
</code></pre></div>


<p>I had to dig through the <code>date</code> man pages for that one.</p>
<p>Next, the output filename.</p>
<div class="highlight"><pre><code class="sh"><span class="nv">OUTPUTDIR</span><span class="o">=</span><span class="s2">&quot;_posts&quot;</span>
<span class="nv">OUTFILE</span><span class="o">=</span><span class="s2">&quot;$OUTPUTDIR/$DATE-$(echo $TITLE | sed &#39;s/ /-/g&#39;).markdown&quot;</span>
</code></pre></div>


<p>I used my new favorite trick of using a <a href="http://www.tldp.org/LDP/abs/html/here-docs.html">here doc</a> as a quick templating language.</p>
<div class="highlight"><pre><code class="sh">cat &gt; <span class="s2">&quot;$OUTFILE&quot;</span> <span class="s">&lt;&lt; EOF</span>
<span class="s">---</span>
<span class="s">layout: post</span>
<span class="s">title:  &quot;$TITLE&quot;</span>
<span class="s">date:   $DATE $(date +&quot;%T&quot;)</span>
<span class="s">categories: TODO</span>
<span class="s">---</span>

<span class="s"># TODO #</span>

<span class="s">EOF</span>
</code></pre></div>


<p>and finally, open vim</p>
<div class="highlight"><pre><code class="sh">vim <span class="s2">&quot;$OUTFILE&quot;</span>
</code></pre></div>


<p>Full script available as a <a href="https://gist.github.com/9967417">gist</a></p>

</div>

<div class="footer">

<h2>Categories</h2>
<ul>
    
    



    <li><a href="/categories.html#bash-ref">
        bash
    </a></li>




</ul>



<h2>Tags</h2>
<ul>
    
    


 
    <li><a href="/tags.html#bash-ref">bash</a></li>
 
    <li><a href="/tags.html#scripting-ref">scripting</a></li>
 
    <li><a href="/tags.html#keystrokes-ref">keystrokes</a></li>




</ul>

</div>

<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


          <div class="footer">
            <div class="contact">
              <p>
                Andrew Noyes<br />
                Software Engineer<br />
                anoyes34@gmail.com
              </p>
            </div>
            <div class="contact">
              <p>
              <a href="https://github.com/atn34">github.com/atn34</a><br />
                <a href="https://twitter.com/atn34">twitter.com/atn34</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
